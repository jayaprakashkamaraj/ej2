<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <title>TypeScript HTML App</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" charset="utf-8" />
    <meta name="msapplication-tap-highlight" content="no"/>
    <link id="theme" href="../../styles/material.css" rel="stylesheet" />
    <script>
        window.require = {
            config: function (json) {
                window.rsConfig = json;
                window.rsConfig.baseUrl = '';
            }
        };
    </script>
    <script src="./demo-config.js"></script>
    <script data-main="./allapi" src="../../node_modules/requirejs/require.js"></script>
    <script>
        require.config(window.rsConfig);
    </script>
</head>
<body>
    <div class="propertypane">
        <b>Properties:</b>
        <table>
            <tr>
                <td>allowDragAndDrop: </td>
                <td><input type="checkbox" onclick="allowDragAndDropFn(this);" /></td>
            </tr>
            <tr>
                <td>allowEditing: </td>
                <td><input type="checkbox" onclick="allowEditingFn(this);" /></td>
            </tr>
            <tr>
                <td>allowMultiSelection: </td>
                <td><input type="checkbox" onclick="allowMultiSelectionFn(this);" /></td>
            </tr>
            <tr>
                <td>animation: </td>
                <td><input type="checkbox" onclick="animationFn(this);" checked="checked" /></td>
            </tr>
            <tr>
                <td>checkedNodes: </td>
                <td><input type="text" id="checkednodes" /><input type="button" onclick="checkedNodesFn(this);" value="Submit" /></td>
            </tr>
            <tr>
                <td>cssClass: </td>
                <td><input type="text" id="cssclass" /><input type="button" onclick="cssClassFn(this);" value="Submit" /></td>
            </tr>
            <tr>
                <td>enablePersistence: </td>
                <td><input type="checkbox" onclick="enablePersistenceFn(this);" /></td>
            </tr>
            <tr>
                <td>enableRtl: </td>
                <td><input type="checkbox" onclick="enableRtlFn(this);" /></td>
            </tr>
            <tr>
                <td>expandedNodes: </td>
                <td><input type="text" id="expandednodes" /><input type="button" onclick="expandedNodesFn(this);" value="Submit" /></td>
            </tr>
            <tr>
                <td>expandOn: </td>
                <td>
                    <input type="radio" name="expandon" value="Auto" onclick="expandOnFn(this);" checked="checked"/>Auto
                    <input type="radio" name="expandon" value="Click" onclick="expandOnFn(this);" />Click
                    <input type="radio" name="expandon" value="DblClick" onclick="expandOnFn(this);" />DblClick
                </td>
            </tr>
            <tr>
                <td>fields: </td>
                <td><input type="button" onclick="fieldsFn(this);" value="Change DS" /></td>
            </tr>
            <tr>
                <td>fullRowSelect: </td>
                <td><input type="checkbox" onclick="fullRowSelectFn(this);" checked="checked" /></td>
            </tr>
            <tr>
                <td>nodeTemplate: via </td>
                <td>
                    <input type="radio" name="nodetemplate" value="event" onclick="nodeTemplateFn(this);" />drawNode event
                    <input type="radio" name="nodetemplate" value="api" onclick="nodeTemplateFn(this);" />API
                    <input type="radio" name="nodetemplate" value="string" onclick="nodeTemplateFn(this);" />string
                </td>
            </tr>
            <tr>
                <td>selectedNodes: </td>
                <td><input type="text" id="selectednodes" /><input type="button" onclick="selectedNodesFn(this);" value="Submit" /></td>
            </tr>
            <tr>
                <td>sortOrder: </td>
                <td>
                    <input type="radio" name="sortorder" value="None" onclick="sortOrderFn(this);" checked="checked" />None
                    <input type="radio" name="sortorder" value="Ascending" onclick="sortOrderFn(this);" />Ascending
                    <input type="radio" name="sortorder" value="Descending" onclick="sortOrderFn(this);" />Descending
                </td>
            </tr>
            <tr>
                <td>showCheckBox: </td>
                <td><input type="checkbox" onclick="showCheckBoxFn(this);" /></td>
            </tr>
        </table>
    </div>
    <div class="propertypane">
        <b>Methods:</b>
        <table>
            <tr>
                <td>addNodes: </td>
                <td>
                    <input type="text" id="addnodes-text" placeholder="Enter the new nodes text" />
                    <input type="number" id="addnodes-level" placeholder="Enter the new node level" />
                    <input type="button" value="addNodes" onclick="addNodesFn(this);" />
                </td>
            </tr>
            <tr>
                <td>beginEdit: </td>
                <td><input type="button" value="beginEdit" onclick="beginEditFn(this);" /></td>
            </tr>
            <tr>
                <td>checkAll: </td>
                <td><input type="button" value="checkAll" onclick="checkAllFn(this);" /></td>
            </tr>
            <tr>
                <td>collapseAll: </td>
                <td>
                    <input type="number" id="collapseall-level" placeholder="Enter the new node level" />
                    <span>excludeHiddenNodes</span><input type="checkbox" id="collapseall-exclude" />
                    <input type="button" value="collapseAll" onclick="collapseAllFn(this);" />
                </td>
            </tr>
            <tr>
                <td>destroy: </td>
                <td><input type="button" value="destroy" onclick="destroyFn(this);" /></td>
            </tr>
            <tr>
                <td>disableNodes: </td>
                <td><input type="button" value="disableNodes" onclick="disableNodesFn(this);" /></td>
            </tr>
            <tr>
                <td>enableNodes: </td>
                <td><input type="button" value="enableNodes" onclick="enableNodesFn(this);" /></td>
            </tr>
            <tr>
                <td>ensureVisible: </td>
                <td>
                    <input type="text" id="ensurevisible" placeholder="Enter the node id" />
                    <input type="button" value="ensureVisible" onclick="ensureVisibleFn(this);" />
                </td>
            </tr>
            <tr>
                <td>expandAll: </td>
                <td>
                    <input type="number" id="expandall-level" placeholder="Enter the new node level" />
                    <span>excludeHiddenNodes</span><input type="checkbox" id="expandall-exclude" />
                    <input type="button" value="expandAll" onclick="expandAllFn(this);" />
                </td>
            </tr>
            <tr>
                <td>getNode: </td>
                <td><input type="button" value="getNode" onclick="getNodeFn(this);" /></td>
            </tr>
            <tr>
                <td>getTreeData: </td>
                <td><input type="button" value="getTreeData" onclick="getTreeDataFn(this);" /></td>
            </tr>
            <tr>
                <td>moveNodes: </td>
                <td>
                    <input type="text" id="movenodes-start" placeholder="Enter the moved nodes id" />
                    <input type="text" id="movenodes-end" placeholder="Enter the target node id" />
                    <input type="button" value="moveNodes" onclick="moveNodesFn(this);" /></td>
            </tr>
            <tr>
                <td>removeNodes: </td>
                <td><input type="button" value="removeNodes" onclick="removeNodesFn(this);" /></td>
            </tr>
            <tr>
                <td>updateNode: </td>
                <td>
                    <input type="text" id="updatenode" placeholder="Enter the new text" />
                    <input type="button" value="updateNode" onclick="updateNodeFn(this);" />
                </td>
            </tr>
            <tr>
                <td>uncheckAll: </td>
                <td><input type="button" value="uncheckAll" onclick="uncheckAllFn(this);" /></td>
            </tr>
        </table>
    </div>
    <div class="layout">
        <b>Events log:</b>
        <button onclick="clickFn();">clear</button>
        <textarea id="events"></textarea>
        <b> Theme: </b>
        <span>
            <input id="material" type="radio" name="theme" value="../../styles/material.css" onclick="themeFn(this);"checked="checked"/>
            Material
            <input id="fabric" type="radio" name="theme" value="../../styles/fabric.css" onclick="themeFn(this);"/>Fabric
            <input id="bootstrap" type="radio" name="theme" value="../../styles/bootstrap.css" onclick="themeFn(this);"/>Bootstrap
            <input id="highcontrast" type="radio" name="theme" value="../../styles/highcontrast.css" onclick="themeFn(this);"/>Highcontrast
        </span>
        <b> Mode: </b>
        <span>
            <input id="mouse" type="radio" name="mode" value="mouse" onclick="modeFn(this);" checked="checked" />Mouse
            <input id="touch" type="radio" name="mode" value="touch" onclick="modeFn(this);" />Touch
        </span>
        <div id="tree"></div>
    </div>
    <style>
        .layout, .propertypane {
            float: left;
            width: 31%;
            overflow: auto;
            padding: 10px;
        }
        .layout.highcontrast {
            background: #111;
        }
        .propertypane {
            border: 1px solid transparent;
            border-right-color: blue;
        }
        table, td {
            padding: 5px;
        }
        #events {
            width: 100%;
            height: 150px;
            display: block;
        }
        .e-treeview .e-list-icon {
            background-repeat: no-repeat;
            background-image: url(images/file_icons.png);
        }
        .e-treeview .e-list-icon.folder {
            background-position: -242px -18px;
        }
        .e-treeview .e-list-icon.file {
            background-position: -196px -132px;
        }
        .e-treeview .e-list-text.e-list-url {
            text-decoration: underline;
        }
        .e-treeview .new {
            margin: 2px 10px;
            position: absolute;
            height: 13px;
            width: 30px;
            background: url(./images/new.svg);
        }
    </style>
    <script>
        function allowDragAndDropFn(ele) {
            var treeObj = document.getElementById('tree').ej2_instances[0];
            if (treeObj) treeObj.allowDragAndDrop = ele.checked;
        }
        function allowEditingFn(ele) {
            var treeObj = document.getElementById('tree').ej2_instances[0];
            if (treeObj) treeObj.allowEditing = ele.checked;
        }
        function allowMultiSelectionFn(ele) {
            var treeObj = document.getElementById('tree').ej2_instances[0];
            if (treeObj) treeObj.allowMultiSelection = ele.checked;
        }
        function animationFn(ele) {
            var treeObj = document.getElementById('tree').ej2_instances[0];
            if (ele.checked) {
                treeObj.animation = { expand: { duration: 400 }, collapse: { duration: 400 } };
            } else {
                treeObj.animation = { expand: { duration: 0 }, collapse: { duration: 0 } };
            }
        }
        function checkedNodesFn() {
            var treeObj = document.getElementById('tree').ej2_instances[0];
            var text = document.getElementById('checkednodes').value;
            if (treeObj) treeObj.checkedNodes = text.split(',');
        }
        function cssClassFn() {
            var treeObj = document.getElementById('tree').ej2_instances[0];
            var text = document.getElementById('cssclass').value;
            if (treeObj) treeObj.cssClass = text;
        }
        function enablePersistenceFn(ele) {
            var treeObj = document.getElementById('tree').ej2_instances[0];
            if (treeObj) treeObj.enablePersistence = ele.checked;
        }
        function enableRtlFn(ele) {
            var treeObj = document.getElementById('tree').ej2_instances[0];
            if (treeObj) treeObj.enableRtl = ele.checked;
        }
        function expandedNodesFn() {
            var treeObj = document.getElementById('tree').ej2_instances[0];
            var text = document.getElementById('expandednodes').value;
            if (treeObj) treeObj.expandedNodes = text.split(',');
        }
        function expandOnFn(ele) {
            var treeObj = document.getElementById('tree').ej2_instances[0];
            if (treeObj) treeObj.expandOn = ele.value;
        }
        function fieldsFn() {
            var treeObj = document.getElementById('tree').ej2_instances[0];
            if (treeObj)
                treeObj.fields = { dataSource: localData, id: "localId", text: "localText", tooltip: "localText", parentID: "localPid",
                hasChildren: "localHasChild", imageUrl: "localImage", iconCss: "localIcons", htmlAttributes: 'localAttr',
                expanded: 'localExpanded', selected: 'localSelected', navigateUrl: 'localUrl' };
        }
        function fullRowSelectFn(ele) {
            var treeObj = document.getElementById('tree').ej2_instances[0];
            if (treeObj) treeObj.fullRowSelect = ele.checked;
        }
        function nodeTemplateFn(ele) {
            var treeObj = document.getElementById('tree').ej2_instances[0];
            if (treeObj) {
                treeObj.element.classList.remove("via-event");
                if (ele.value === "api") {
                    treeObj.nodeTemplate = "#treeTemplate";
                }
                else if (ele.value === "string") {
                    treeObj.nodeTemplate = '<div>${nodeText} - ${nodeId}<span class="new"></span></div>';
                }
                else {
                    treeObj.element.classList.add('via-event');
                    treeObj.nodeTemplate = null;
                }
            }
        }        
        function selectedNodesFn() {
            var treeObj = document.getElementById('tree').ej2_instances[0];
            var text = document.getElementById('selectednodes').value;
            if (treeObj) treeObj.selectedNodes = text.split(',');
        }
        function sortOrderFn(ele) {
            var treeObj = document.getElementById('tree').ej2_instances[0];
            if (treeObj) treeObj.sortOrder = ele.value;
        }        
        function showCheckBoxFn(ele) {
            var treeObj = document.getElementById('tree').ej2_instances[0];
            if (treeObj) treeObj.showCheckBox = ele.checked;
        }

        var id = 1;
        function addNodesFn() {
            var treeObj = document.getElementById('tree').ej2_instances[0];
            var level = document.getElementById('addnodes-level').value;
            level = parseInt(level);
            var text = document.getElementById('addnodes-text').value;
            text = text ? text : 'New node ' + id;
            var target = treeObj.selectedNodes[0];
            var nodes = text.split(',');
            var newNodes = [];
            for (var i = 0, len = nodes.length; i < len; i++) {
                var newNode = { nodeId: id, nodeText: nodes[i], nodeCusText: 'This is ' + nodes[i], icons: 'file' };
                newNodes.push(newNode);
                id++;
            }
            if (treeObj) treeObj.addNodes(newNodes, target, level);
        }
        function beginEditFn() {
            var treeObj = document.getElementById('tree').ej2_instances[0];
            if (treeObj) treeObj.beginEdit(treeObj.selectedNodes[0]);
        }
        function checkAllFn() {
            var treeObj = document.getElementById('tree').ej2_instances[0];
            if (treeObj) treeObj.checkAll(treeObj.selectedNodes);
        }
        function collapseAllFn() {
            var level = document.getElementById('collapseall-level').value;
            level = parseInt(level);
            var exclude = document.getElementById('collapseall-exclude').value;
            var treeObj = document.getElementById('tree').ej2_instances[0];
            if (treeObj) treeObj.collapseAll(treeObj.selectedNodes, level, exclude);
        }
        function destroyFn() {
            var treeObj = document.getElementById('tree').ej2_instances[0];
            if (treeObj) treeObj.destroy();
        }
        function disableNodesFn() {
            var treeObj = document.getElementById('tree').ej2_instances[0];
            if (treeObj) treeObj.disableNodes(treeObj.selectedNodes);
        }
        function enableNodesFn() {
            var treeObj = document.getElementById('tree').ej2_instances[0];
            if (treeObj) treeObj.enableNodes(treeObj.selectedNodes);
        }
        function ensureVisibleFn() {
            var treeObj = document.getElementById('tree').ej2_instances[0];
            var node = document.getElementById('ensurevisible').value;
            if (treeObj) treeObj.ensureVisible(node);
        }
        function expandAllFn() {
            var level = document.getElementById('expandall-level').value;
            level = parseInt(level);
            var exclude = document.getElementById('expandall-exclude').value;
            var treeObj = document.getElementById('tree').ej2_instances[0];
            if (treeObj) treeObj.expandAll(treeObj.selectedNodes, level, exclude);
        }
        function getNodeFn() {
            var treeObj = document.getElementById('tree').ej2_instances[0];
            if (treeObj) {
                var data = treeObj.getNode(treeObj.selectedNodes[0]);
                alert('The selected node is: ' + (data ? data.text : ''));
            }
        }
        function getTreeDataFn() {
            var treeObj = document.getElementById('tree').ej2_instances[0];
            if (treeObj) {
                var data = treeObj.getTreeData();
                console.log(data);
                alert('The updated data are: ' + JSON.stringify(data));
            }
        }
        function moveNodesFn() {
            var treeObj = document.getElementById('tree').ej2_instances[0];
            var start = document.getElementById('movenodes-start').value;
            var end = document.getElementById('movenodes-end').value;
            if (treeObj) treeObj.moveNodes(start.split(','), end, 1);
        }
        function removeNodesFn() {
            var treeObj = document.getElementById('tree').ej2_instances[0];
            if (treeObj) treeObj.removeNodes(treeObj.selectedNodes);
        }
        function updateNodeFn(ele) {
            var treeObj = document.getElementById('tree').ej2_instances[0];
            var text = document.getElementById('updatenode').value;
            if (treeObj) treeObj.updateNode(treeObj.selectedNodes[0], text);
        }
        function uncheckAllFn() {
            var treeObj = document.getElementById('tree').ej2_instances[0];
            if (treeObj) treeObj.uncheckAll(treeObj.selectedNodes);
        }

        function clickFn() {
            document.getElementById("events").innerHTML = "";
        }
        function themeFn(ele) {
            document.getElementById("theme").href = ele.value;
            if (ele.id === "highcontrast") {
                document.getElementsByClassName('layout')[0].classList.add(['highcontrast']);
            } else {
                document.getElementsByClassName('layout')[0].classList.remove(['highcontrast']);
            }
        }
        function modeFn(ele) {
            if (ele.value === 'touch') {
                document.getElementsByClassName('layout')[0].classList.add('e-bigger');
            } else {
                document.getElementsByClassName('layout')[0].classList.remove('e-bigger');
            }
            var treeObj = document.getElementById('tree').ej2_instances[0];
            if (treeObj) {
                var tempData = treeObj.fields.dataSource;
                treeObj.fields = { dataSource: null };
                treeObj.fields = { dataSource: tempData };
            }
        }
    </script>
    <script id="treeTemplate" type="text/x-template">
        <div>${nodeText} - ${nodeId}</div>
    </script>
</body>
</html>